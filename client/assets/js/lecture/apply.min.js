function inputFn(e){$(e).bind("keyup blur",function(){var e=$(this).val();""==e?($(this).next("p").html("请将信息添加完全"),$(this).siblings("label").children().css({color:"red"}),$("button").removeClass("submit")):($(this).next("p").html(""),$(this).siblings("label").children().css({color:"#000"})),$(".name").val()&&$(".age").val()&&$("button").addClass("submit");var t=$(".age").val();(t.length>2||/[^0-9]+/g.test(t))&&($(".age").next("p").html("请填写正确的年龄"),$("button").removeClass("submit"))}),$(".name").val()&&$(".age").val()&&$("button").addClass("submit")}for(var nameEl=document.getElementById("showPicker"),namelecture=document.getElementById("showPickerlecture"),sex=document.getElementById("sex"),lectureInput=document.getElementById("lecture"),lecture=[],json=JSON.parse(jsondata),i=0;i<json.length;i++)json[i].text=json[i].name,json[i].value=json[i].id,lecture.push(json[i]);var data=[{text:"男",value:1},{text:"女",value:2}],lecture=new Picker({data:[lecture],selectedIndex:[0],title:"您的选择"}),picker=new Picker({data:[data],selectedIndex:[0],title:"您的选择"});picker.on("picker.select",function(e,t){nameEl.innerText=data[t[0]].text,sex.value=data[t[0]].text}),lecture.on("picker.select",function(e,t){namelecture.innerText=lecture.data[0][t[0]].text,lectureInput.value=t[0]+1}),nameEl.addEventListener("click",function(){picker.show()}),namelecture.addEventListener("click",function(){lecture.show(function(){picker.refill(lecture)})}),inputFn(".name"),inputFn(".age"),$("#button").click(function(){if($(".name").val()&&$(".age").val()&&$(".age").val().length<=2&&!/[^0-9]+/g.test($(".age").val())){var e=$(".name").val(),t=$(".age").val(),n=$("#sex").val(),a=$("#lecture").val();$.ajax({url:window.location.pathname+"/verify",data:{name:e,age:t,sex:n,lectureId:a},type:"get",success:function(e){console.log(e.code),0==e.code?location.href="success?img="+e._data:1==e.code&&$(".space").html(e.err)}})}});